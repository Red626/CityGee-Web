/*!
 * Distpicker v0.2.1
 * https://github.com/fengyuanchen/distpicker
 *
 * Copyright 2014 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2014-12-26T03:58:37.444Z
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","ChineseDistricts"],a):a(jQuery,ChineseDistricts)}(function(a,b){"use strict";if("undefined"==typeof b)throw new Error("The file 'distpicker.data.js' must be included first!");var c=".distpicker",d="change"+c,e=function(b,c){this.$element=a(b),this.defaults=a.extend({},e.DEFAULTS,a.isPlainObject(c)?c:{}),this.placeholders=a.extend({},e.DEFAULTS),this.active=!1,this.init()};e.prototype={constructor:e,data:b,init:function(){var b=this.defaults,c=this.$element.find("select"),d=c.length,e={};c.each(function(){a.extend(e,a(this).data())}),a.each(["province","city","district"],a.proxy(function(a,f){e[f]?(b[f]=e[f],this["$"+f]=c.filter("[data-"+f+"]")):this["$"+f]=d>a?c.eq(a):null},this)),this.addListeners(),this.reset(),this.active=!0},addListeners:function(){this.$province&&this.$province.on(d,a.proxy(function(){this.output("city"),this.output("district")},this)),this.$city&&this.$city.on(d,a.proxy(function(){this.output("district")},this))},removeListeners:function(){this.$province&&this.$province.off(d),this.$city&&this.$city.off(d)},output:function(b){var c,d,e,f=this.defaults,g=this.placeholders,h=this["$"+b],i={},j=[];h&&h.length&&(c=f[b],d="province"===b?1:"city"===b?this.$province&&this.$province.find(":selected").data("zipcode"):"district"===b?this.$city&&this.$city.find(":selected").data("zipcode"):d,i=a.isNumeric(d)?this.data[d]:null,a.isPlainObject(i)&&a.each(i,function(a,b){var d=b===c;d&&(e=!0),j.push({zipcode:a,address:b,selected:d})}),e||(j.length&&(f.autoSelect||f.autoselect)&&(j[0].selected=!0),!this.active&&c&&(g[b]=c)),f.placeholder&&j.unshift({zipcode:"",address:g[b],selected:!1}),h.html(this.template(j)))},template:function(b){var c="";return a.each(b,function(a,b){c+='<option value="'+(b.address&&b.zipcode?b.address:"")+'" data-zipcode="'+(b.zipcode||"")+'"'+(b.selected?" selected":"")+">"+(b.address||"")+"</option>"}),c},reset:function(a){a?this.$province&&this.$province.find(":first").prop("selected",!0).trigger(d):(this.output("province"),this.output("city"),this.output("district"))},destroy:function(){this.removeListeners(),this.$element.removeData("distpicker")}},e.DEFAULTS={autoSelect:!0,placeholder:!0,province:"—— 省 ——",city:"—— 市 ——",district:"—— 区 ——"},e.setDefaults=function(b){a.extend(e.DEFAULTS,b)},a.fn.distpicker=function(b){var c,d=[].slice.call(arguments,1);return this.each(function(){var f,g=a(this),h=g.data("distpicker");h||g.data("distpicker",h=new e(this,b)),"string"==typeof b&&a.isFunction(f=h[b])&&(c=f.apply(h,d))}),"undefined"!=typeof c?c:this},a.fn.distpicker.Constructor=e,a.fn.distpicker.setDefaults=e.setDefaults,a(function(){a('[data-toggle="distpicker"],[data-distpicker],[distpicker]').distpicker()})});